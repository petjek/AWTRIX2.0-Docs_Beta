![](\assets\awtrix.jpeg)


# Teileliste
## Allgemeiner Hinweis
Die Verfügbarkeit der Artikel ändert sich täglich. Daher kann es vorkommen, dass einige Artikel unter dem Link nicht mehr zu finden sind. Allerdings gibt es die Teile von vielen Händlern. Einfach auf Amazon, Ebay oder Aliexpress suchen.

In unserem Shop gibt es die Leiterplatten zu kaufen. Diese sind entweder einzeln, also ohne Bauteile, oder als Bausatz bestellbar. Mit dem Kauf dieser Hardware (diese ist nicht zwingend notwendig) unterstützt ihr uns bei der Weiterentwicklung von Awtrix & Awtrix Pro.

## Aufbau mit Leiterplatte als Bausatz
### Zwingend benötigte Bauteile
| Nr | Name                     | Link                            |
| -  |:------------------------:| :------------------------------:|
| 1  | Awtrix Mainboard Bausatz | [click here](https://blueforcer.de/produkt/awtrix-mainboard-2-0-bausatz/) |
| 2  | 32x8 Matrix              | [click here](https://www.amazon.de/dp/B07KT1H481/ref=cm_sw_em_r_mt_dp_U_hm1dEbB1EFXE4) |
| 3  | Awtrix Gehäuse       | [click here](https://www.thingiverse.com/search?q=Awtrix&dwh=425e0f5463a8252) |
| 4  | Wemos D1 mini            | [click here](https://goo.gl/TVk7h7) |
| 5  | Netzteil (>3A)           | [click here](https://goo.gl/QLydM3) |
| 6  | Strombuchse              | [click here](https://goo.gl/j4Xov7) |


### Optionale Bauteile
| Nr | Name                     | Link                            |
| -  |:------------------------:| :------------------------------:|
| 1  | LDR GL5528               | [click here](https://www.amazon.de/Qualit%C3%A4t-GL5516-Lichtabh%C3%A4ngige-Widerstand-Fotowiderstand/dp/B00NXW9WZ6/) |
| 2  | DF Mini Player           | [click here](https://www.banggood.com/Geekcreit-DFPlayer-Mini-MP3-Player-Module-MP3-Voice-Audio-Decoder-Board-For-Arduino-Supporting-TF-Card-U-Disk-IOSerial-PortAD-p-969191.html?akmClientCountry=DE&&cur_warehouse=UK) |
| 3.1| Htui21d                  | [click here](https://www.google.com/search?sxsrf=ACYBGNSRp5ZO5K2-pnWJ4o3-duttcXxHjw:1578063110543&q=Htu21d&spell=1&sa=X&ved=2ahUKEwi-_ouZ1-fmAhWBEVAKHTZvDA8QBSgAegQICBAn&biw=1718&bih=1283) |
| 3.2| BME280                   | [click here](https://www.google.com/search?biw=1718&bih=1283&sxsrf=ACYBGNTs_KPVf9kgTZO8iJ_q_Wi6Yj-W-Q%3A1578063173049&ei=RVUPXsTSAofSwAL4u7WYBg&q=BME280&oq=BME280&gs_l=psy-ab.3..35i39l2j0i203l8.11392.11613..11770...0.2..0.73.143.2......0....1..gws-wiz.......0i71j0i7i10i30j0i7i30.4GuYcDy5H-w&ved=0ahUKEwiEifO21-fmAhUHKVAKHfhdDWMQ4dUDCAs&uact=5) |
| 4  | Lautsprecher             | [click here](https://de.aliexpress.com/item/32853811267.html) |

Die Touchsensoren sind hier nicht mit aufgeführt, weil sie Teil des Bausatzes sind und daher nicht gekauft werden müssen.


## Aufbau mit Leiterplatte ohne Bausatz
### Zwingend benötigte Bauteile
| Nr | Name                     | Link                            |
| -  |:------------------------:| :------------------------------:|
| 1  | Awtrix Mainboard         | [click here](https://blueforcer.de/produkt/awtrix-mainboard-2-0/) |
| 2  | Wemos D1 mini            | [click here](https://goo.gl/TVk7h7) |
| 3  | 32x8 Matrix              | [click here](https://www.amazon.de/dp/B07KT1H481/ref=cm_sw_em_r_mt_dp_U_hm1dEbB1EFXE4) |
| 4  | Netzteil (>3A)           | [click here](https://goo.gl/QLydM3) |
| 5  | Strombuchse              | [click here](https://goo.gl/j4Xov7) |
| 6  | Widerstände (3x 1k)      | [click here](https://google.de) |
| 7  | Shottkydioden (2x 1N4004)| [click here](https://google.de) |
| 8  | Stiftleiste              | [click here](https://google.de) |
| 9  | Jumper                   | [click here](https://google.de) |
| 10 | 1000uF 10V Kondensator   | [click here](https://google.de) |

### Optionale Bauteile
| Nr | Name                     | Link                            |
| -  |:------------------------:| :------------------------------:|
| 1  | LDR GL5528               | [click here](https://www.amazon.de/Qualit%C3%A4t-GL5516-Lichtabh%C3%A4ngige-Widerstand-Fotowiderstand/dp/B00NXW9WZ6/) |
| 2  | DF Mini Player           | [click here](https://www.banggood.com/Geekcreit-DFPlayer-Mini-MP3-Player-Module-MP3-Voice-Audio-Decoder-Board-For-Arduino-Supporting-TF-Card-U-Disk-IOSerial-PortAD-p-969191.html?akmClientCountry=DE&&cur_warehouse=UK) |
| 3.1| Htui21d                  | [click here](https://google.de) |
| 3.2| BME280                   | [click here](https://google.de) |
| 4  | Touch Taster (3x)        | [click here](https://google.de) |
| 5  | Lautsprecher             | [click here](https://de.aliexpress.com/item/32853811267.html) |


# Elektronik
Die Elektronik kann entweder auf eine Lochrasterplatine gelötet ("frei verdrahtet") werden oder auf der extra für Awtrix entwickelten Leiterplatte. Die genauen Details zu den benötigten Bauteilen bitte der [Teileliste](../AWTRIXpro/partlistPro) entnehmen.

## Basis Variante

![Basissetup](\assets\pro\AWTRIX_Core_Steckplatine.jpg)

## Lichtsensor zur Helligkeitsregelung (optional)
Der Helligkeitssensor kann optinal eingebaut werden. Dieser sorgt dafür, dass - beispielsweise in einem dunklen Raum - durch herunterdimmen der Helligkeit, die Matrix nicht blendet. Anders herum wird die Matrix bei einer hohen Helligkeit im Raum hoch gedimmt, damit man den Inhalt der Matrix noch lesen kann.

![ldr](\assets\pro\AWTRIX_LDR_Steckplatine.jpg)

## DFPlayer Mini zur Soundausgabe (optional)
Der DFPlayer dient zur Ausgabe von Sounds und ist ebenfalls optinal verwendbar. Es werden .mp3-Dateien auf einer Speicherkarte gespeichert, welche in das Micro-SD-Fach des Players eingesteckt wird. Dies ermöglicht es, dass deine Matrix beispielsweise mit dir spricht. Das hinzufügen von .mp3-Dateien kann leider nur über die SD Karte am PC erfolgen. Ein hochladen vom Server oder ähnliches ist technisch leider nicht möglich.

![](\assets\pro\AWTRIX_DFMini_Steckplatine.jpg)

| Wemos | DFPlayer Mini | Funktion | Hinweis  |
| ----- | ------------- | -------- | -------- |
| 5V    | VCC           | Spannungsversorgung (+)    |          |
| G     | GND           | Spannungsversorgung (-)   |          |
| D7    | TX            | Transmit (senden) |          |
| D5    | RX            | Receive (empfangen)  | früher D8 |

## Temperatur- und Luftfeuchtigkeitssensor (optional)
Optinal kann Awtrix mit zwei verschiedenen Raumklimasensoren arbeiten. Hierbei kann frei gewählt werden ob der BME280 oder der Htu21d zum Einsatz kommen soll. Die gemessenen Werte werden dem Server geschickt und können zum Einen mittels App direkt auf der Matrix angezeigt werden und zum Anderen von einem Hausautomationsserver (ioBroker, FHEM, ...) mittels API vom Awtrix Server abgerufen werden.

![](\assets\pro\AWTRIX_Temp_Steckplatine.jpg)

| Wemos | BME280 | Htu21d | Funktion | Hinweis  |
| --- | --- | --- | --- |--- |
| 3.3V | VCC |  VCC |Spannungsversorgung (+) | nicht 5V kompatibel! |
| GND | GND | GND |Spannungsversorgung (-) | |
| D3 | SDA | SDA |I2C Daten | |
| D1 | SCL | SCL |I2C Takt | |

Bei Verwendung von Temperatur- und Gestensensor werden die Pins D1 & D3 des Wemos D1 mini doppelt verwendet (I2C Bus).

## Touch-Taster zur Bedienung (optional)

![](\assets\pro\AWTRIX_Touch_Steckplatine.jpg)

| Wemos | Taster links | Taster mitte | Taster rechts |Funktion | Hinweis  |
| ----- | ------------- | ------------- | ------------- | -------- | -------- |
| 3,3V    | VCC  | VCC           | VCC                    | Spannungsversorgung (+)    |          |
| G     | GND       | GND   | GND       | Spannungsversorgung (-)   |          |
| D0    | I/O   |  -  |     -        | Tastsignal |          |
| D4    | -  | I/O  | -            | Tastsignal  | Brücke A zulöten |
| D5    | -  | -  | I/O            | Tastsignal  |  |

Die Touch Sensoren haben auf der kleinen Leiterplatte zwei Brücken, die mann mit Lötzinn verschließen kann. Dies wird beim mittleren Sensor zwingend benötigt, da der Wemos anssonsten nicht mehr startet. Um dies zu verhindern muss beim **mittleren Touch Taster die Brücke A geschlossen** werden. Dadurch wird der I/O Pin auf Active Low gestellt. Andere Touch Sensoren werden nicht empfohlen, da sie erstens nicht fürs Gehäuse vorgesehen sind (andere Maße) und zweitens keine Möglichkeit besitzen eine Brücke einzulöten.

## Gestensensor zur Bedienung (optional)
Der Gestensensor kann optinal zur einfachen Bedienung der Matrix benutzt werden. Gesten wie mit der Hand von links nach rechts wischen oder anders herum sind hier möglich.

![](\assets\pro\AWTRIX_Gesture_Steckplatine.jpg)

| Wemos | APDS-9960 | Funktion | Hinweis  |
| --- | --- | --- | --- |
| 3.3V | VCC | Spannungsversorgung (+) | nicht 5V kompatibel! |
| GND | GND | Spannungsversorgung (-) | |
| D3 | SDA | I2C Daten | |
| D1 | SCL | I2C Takt | |
| D6 | INT | Interrupt |  |

Bei Verwendung von Temperatur- und Gestensensor werden die Pins D1 & D3 des Wemos D1 mini doppelt verwendet (Bus).

## Serielle Verbindung oder USB-Verbindung zur Matrix

Wenn es zu Problemen bei der WiFi-Übertragung zwischen Server und Controller kommt, gibt es die Möglichkeit den Server direkt per Serial an den Controller (Wemos D1 Mini) anzuschließen.

Auf Controller-Seite muss hierfür im Hotspot Menü der Haken bei Serial gesetzt werden. Außerdem braucht der Wemos weiterhin zwingend eine Verbindung zu einem Netzwerk. Ansonsten öffnet er immer wieder den Hotspot und zeigt damit auch nichts anderes an.
Die WiFi Verbindung wird verwendet, um den Controller auch weiterhin updaten zu können.

Es kann auch der **USB-Port** des Pi's verwendet werden (auch für jede andere Serverplattform). Dazu muss man einfach den Server per microUSB-Kabel an den Wemos D1 anschließen.

Bei Verwenudng der **GPIOs** wird der Pi wie folgt mit dem Wemos verbunden:

![](\assets\pro\AWTRIX_raspi_V2_Steckplatine.jpg)

| Wemos | Raspberry Pin-No | Funktion |
| ----- | ---------------- | -------- |
| 5V    | 04 - 5V          | Spannungsversorgung (+) |
| GND   | 06 - GND         | Spannungsversorgung (-)   |
| RX    | 08 - TXD         | Transmit (senden) |
| TX    | 10 - RXD         | Receive (empfangen)  |

**Bitte zwingend auf die Raspberry Version achten. Hier kann es Unterschiede geben!**

Beim Raspberry muss die serielle Schnittstelle aktiviert werden.
Dazu muss auf den Raspi per ssh zugegriffen werden können. Wenn dies nicht bereits geschehen ist, bitte wie folgt ssh aktivieren:
- Raspi runter fahren und die SD-Karte entnehmen.
- Am PC/Mac die SD-Karte einstecken und im root-Verzeichnis eine leere Datei mit dem Namen **ssh** anlegen. Die Datei darf keine Endung haben (z.B. .txt; bitte darauf achten, falls du die Datei mit einem Texteditor anlegst)
- Die Karte wieder in den Raspi stecken und diesen starten.

Der Raspi ist nun über das Netzwerk per ssh erreichbar. Passende Programme dafür sind [Putty](https://www.putty.org/) oder [Termius](https://termius.com/). 

Ein wichtiger Sicherheitshinweis:

Sollte dich dein Raspberry Pi beim Start darauf hinweisen, dass bei aktivem ssh-Zugriff das Passwort für den Benutzer "pi" noch das Standardpasswort (raspberry) ist, igrnoriere das im eigenen Interesse **NICHT**! Das Passwort ist schnell geändert mittels
`sudo passwd`

Anschließend einmal das alte Passwort (in diesem Falle _raspberry_) und anschließend dein neues Passwort 2x eingeben. Und: nein, nicht 1234! 

Bist du mit dem Raspi verbunden, kann das Raspberry-Konfigarionsmenü per   
`sudo raspi-config`
aufgerufen werden. Dort im Menüpunkt **5 Interfacing Options - P6 Serial** die Abfrage mit Ja bzw. Yes beantworten.

Wer es lieber manuell in der /boot/config.txt anpassen möchte, kann auch mit `nano /boot/config.txt` den Texteditor starten und in der Konfigurationsdatei nach dem Wert
`enable_uart` suchen und diesen auf 1 setzen.

`enable_uart=1`

In beiden Fällen muss der Raspi im Anschluss neu gestartet werden.

# Gehäuse

## 3D Druck

Das Gehäuse kann mit einem 3D-Drucker erstellt werden. Die notwendigen Dateien können von [Thingiverse](https://www.thingiverse.com/thing:2791276) heruntergeladen werden.

Die 3D-Objekte sind bereits so ausgerichtet, das möglichst wenig Hilfsmaterial benötigt wird. Das LED-Raster sollte in **Schwarz** gedruckt werden, da sonst die "Pixel" nicht klar getrennt sind, und durch das Material leuchten.

**Empfohlene Druckeinstellungen**

- 0.2 mm Layerhöhe

- 20% Infill

- Support vom Druckbett

- 45-55 mm/s

## Zusammenbau

- Kleben Sie zunächst die beiden Teile für das LED-Gitter auf der Innenseite zusammen.
Als Diffusor kann hochwertiges und dickeres Papier verwendet werden. Es ist wichtig, dass man die Fasern nicht sieht, wenn man sie gegen helles Licht (wie bei normalem Druckerpapier).
- Anschließend den Rahmen der flachen Seite des LED-Rasters vorsichtig mit Klebestift bestreichen und das Papier aufkleben. Dabei unbedingt darauf achten, dass keine _Gnubbel_ vom Klebestift am Raster hängen geblieben sind, denn diese würde man später unweigerlich sehen.
Dies Verkleben ist am besten dort durchzuführen, wo Awtrix später auch stehen wird. Aufgrund von Temperatur- und Feuchtigkeitsschwankungen kann sich das Papier leicht verziehen. Abhilfe können hier winzige Mengen Sekundenklebers an ein paar Schnittpunkten des Rasters schaffen. Aber wirklich winzige Mengen!
- Dann die beiden Gehäuseteile zusammensetzen und ggf. mit etwas Kleber fixieren.
- Für die Stromversorgung zwei Kabel an die Buchse anlöten und in das Gehäuse schrauben.
- Anschließend kann die restlichen Verkabelung erfolgen.
- Der LDR kann durch eine der oberen 5mm Lüftungsöffnungen gesteckt werden.
- Wenn alles fertig ist, den Diffusor flach hin und die LED-Matrix auflegen, die perfekt in die Nut passen sollte.
- Jetzt das Gehäuse auf das LED-Raster legen. 
- Abschließend alles auf die Rückseite drehen und den Vorderrahmen befestigen.

Viele Anwender haben eigene Gehäuse entworfen und gebaut. Einfach mal [hier](https://forum.blueforcer.de/d/22-show-your-awtrix) rein schauen.
